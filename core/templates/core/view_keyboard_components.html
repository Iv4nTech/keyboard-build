{% extends 'core/base.html' %}
{% load static %}

{% block tittle_bar %}View components{% endblock %}
{% block tittle_section %}Components of keyboard #{{keyboard.id}} {{ keyboard.name|default:"Name not available" }} {% endblock %}

{% block content %}
    {% if messages %}
    {% for message in messages %}
    <div class="message {{message.tags}}">
        {{message}}
    </div>
    {% endfor %}
    {% endif %}
    <div class="user-grid">
        {% for component in components %}
        <a href="{% url 'detail_components' pk_k=keyboard.id pk=component.component.pk %}">
        <li class="product-card component-card">
            <div class="product-header">
                  {% if component.component.image %}
          <img width="100px" src="{{component.component.image.url}}" alt="Keyboard by user {{keyboard.user.username}}">
          {% endif %}
                <div>
                    <span class="component-type-badge">{{ component.component.get_type_display|default:component.component.type }}</span>
                    <h3 class="product-title">{{ component.component.brand }}</h3>
                </div>
                <span class="price-tag">${{ component.component.price }}</span>
            </div>
            
            <p class="component-model">{{ component.component.model }}</p>
            
            <div class="product-divider"></div>
            
            <div class="product-footer">
                <span class="product-label">Purchase Link</span>
                <a href="{{ component.component.shopping_website }}" target="_blank" class="pill-tag link-action">
                    Visit Store <i class="fas fa-external-link-alt"></i>
                </a>
            </div>
        </li>
        </a>
        {% empty %}
        <div class="empty-state">
            <p>This keyboard not have components.</p>
        </div>
        {% endfor %}
    </div>
    <a href="{% url 'create_component' keyboard.id %}" class="btn">Create component</a>
</div>
{% if page_obj.has_previous %}
  <a class="btn" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}">Anterior</a>
{% endif %}

{% if page_obj.paginator.num_pages > 1 %}
{% for number in page_obj.paginator.page_range %}
{% if number == page_obj.number %}
<a class="pagination-btn number-selected" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{number}}">
    {{ number }}
</a>
{% else %}
<a class="btn btn-ghost" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{number}}">
    {{ number }}
</a>
{% endif %}
{% endfor %}
{% endif %}
{% if page_obj.has_next %}
  <a class="btn" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}">Siguiente</a>
{% endif %}
{% endblock %}