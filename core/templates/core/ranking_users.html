{% extends 'core/base.html' %}
{% load static %}
{% block tittle_bar %}Ranking users{% endblock %}
{% block tittle_section %}Top Users{% endblock %}
{% block content %}

<div class="ranking-list">
    <div style="padding: 1rem 1.5rem; background: rgba(255,255,255,0.02); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted);">
        Table ranking
    </div>
    
    <ul>
    {% for user in page_obj %}
        <li class="ranking-item">
            <div style="display: flex; align-items: center; gap: 15px;">
                {% if user.image %}
                <img src="{{user.image.url}}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;" alt="">
                {% else %}
                <img src="{% static 'images/logo-default.jpg' %}" style="width: 40px; height: 40px; border-radius: 50%; opacity: 0.7;" alt="Default">
                {% endif %}
                
                <a href="{% url 'user_profile' user.username %}" style="font-weight: 600;">@{{user.username}}</a>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase;">Level</div>
                <div style="font-size: 1.2rem; font-weight: bold; color: var(--primary);">{{user.max_level | default:'0'}}</div>
            </div>
        </li>
    {% endfor %}
    </ul>
</div>
{% if page_obj.has_previous %}
  <a class="btn" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.previous_page_number }}">Anterior</a>
{% endif %}

{% if page_obj.paginator.num_pages > 1 %}
{% for number in page_obj.paginator.page_range %}
{% if number == page_obj.number %}
<a class="pagination-btn number-selected" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{number}}">
    {{ number }}
</a>
{% else %}
<a class="btn btn-ghost" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{number}}">
    {{ number }}
</a>
{% endif %}
{% endfor %}
{% endif %}
{% if page_obj.has_next %}
  <a class="btn" href="?{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ page_obj.next_page_number }}">Siguiente</a>
{% endif %}
{% endblock %}